let t={},e={};const n=(t,e)=>{if(!e)return;let n=e.split("\n");for(const e of n){const n=document.createElement("p");n.textContent=e,t.appendChild(n)}},s=(t,e)=>{if(!e)return;const n=document.createElement("ul");for(const t in e){const s=e[t],o=document.createElement("li"),r=document.createElement("a");r.href=s,r.textContent=t,r.target="_blank",o.appendChild(r),n.appendChild(o)}t.appendChild(n)},o=(t,e)=>{if(!e)return;const n=document.createElement("h2");n.classList.add("question"),n.textContent=e,t.appendChild(n)},r=(n,s,o)=>{if(!s)return;"string"==typeof s&&void 0!==e[s]&&(s=e[s]);const r=document.createElement("ul");r.classList.add("answers");let a=1;for(const[e,n]of Object.entries(s)){const s=document.createElement("li"),c=document.createElement("a");switch(!0){case"string"==typeof n&&void 0!==t[n]:const e=t[n];c.href=`#${e}`;break;case"string"==typeof n&&n.startsWith("section-"):c.href=`#${n}`;break;default:const s=o+"-"+a;c.href=`#${s}`}c.textContent=e,s.appendChild(c),r.appendChild(s),a++}n.appendChild(r)};function a(n,s){let o=n.answers;if(n.anchor&&(t[n.anchor]=s),!o)return;let r=1,c={};for(const[t,e]of Object.entries(o)){const n=s+"-"+r;c[t]=n,e&&a(e,n),r++}n.anchor&&(e[n.anchor]=c)}const c=(t,e,a)=>{const i=t.answers,d=((t,e)=>{const a=document.createElement("section");return a.setAttribute("data-transition","slide-out"),a.setAttribute("data-auto-animate",null),a.id=e,Array.isArray(t.content)&&t.content.forEach((c=>{for(const[i,d]of Object.entries(c))switch(i){case"answers":r(a,t.answers,e);break;case"links":s(a,d);break;case"question":o(a,d);break;case"text":n(a,d)}})),a})(t,a);if(e.appendChild(d),!i)return;let l=1;for(const[t,n]of Object.entries(i))n&&c(n,e,a+"-"+l++)},i={id:"yaml-section-builder",init:async t=>{const e=await(async t=>{const e=await fetch(t);if(!e.ok)throw new Error(`Failed to fetch ${t}: ${e.statusText}`);const n=await e.text();return jsyaml.load(n)})("/plugin/yaml-section-builder/config.yml");a(e,"section");let n=(t=>{const e=document.createElement("div");return e.classList.add("slides"),c(t,e,"section"),e})(e),s=document.querySelector("div.reveal div.slides");if(s&&n)for(;n.firstChild;)s.appendChild(n.firstChild)}};export{i as default};
