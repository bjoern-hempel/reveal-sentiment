!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).YamlSectionBuilder=t()}(this,(function(){"use strict";let e={},t={};const n=(e,t)=>{if(!t)return;let n=t.split("\n");for(const t of n){const n=document.createElement("p");n.textContent=t,e.appendChild(n)}},o=(e,t)=>{if(!t)return;const n=document.createElement("ul");for(const e in t){const o=t[e],s=document.createElement("li"),i=document.createElement("a");i.href=o,i.textContent=e,i.target="_blank",s.appendChild(i),n.appendChild(s)}e.appendChild(n)},s=(e,t)=>{if(!t)return;const n=document.createElement("h2");n.classList.add("question"),n.textContent=t,e.appendChild(n)},i=(n,o,s)=>{if(!o)return;"string"==typeof o&&void 0!==t[o]&&(o=t[o]);const i=document.createElement("ul");i.classList.add("answers");let r=1;for(const[t,n]of Object.entries(o)){const o=document.createElement("li"),c=document.createElement("a");switch(!0){case"string"==typeof n&&void 0!==e[n]:const t=e[n];c.href=`#${t}`;break;case"string"==typeof n&&n.startsWith("section-"):c.href=`#${n}`;break;default:const o=s+"-"+r;c.href=`#${o}`}c.textContent=t,o.appendChild(c),i.appendChild(o),r++}n.appendChild(i)};function r(n,o){let s=n.answers;if(n.anchor&&(e[n.anchor]=o),!s)return;let i=1,c={};for(const[e,t]of Object.entries(s)){const n=o+"-"+i;c[e]=n,t&&r(t,n),i++}n.anchor&&(t[n.anchor]=c)}const c=(e,t,r)=>{const a=e.answers,d=((e,t)=>{const r=document.createElement("section");return r.setAttribute("data-transition","slide-out"),r.setAttribute("data-auto-animate",null),r.id=t,Array.isArray(e.content)&&e.content.forEach((c=>{for(const[a,d]of Object.entries(c))switch(a){case"answers":i(r,e.answers,t);break;case"links":o(r,d);break;case"question":s(r,d);break;case"text":n(r,d)}})),r})(e,r);if(t.appendChild(d),!a)return;let l=1;for(const[e,n]of Object.entries(a))n&&c(n,t,r+"-"+l++)};return{id:"yaml-section-builder",init:async e=>{const t=await(async e=>{const t=await fetch(e);if(!t.ok)throw new Error(`Failed to fetch ${e}: ${t.statusText}`);const n=await t.text();return jsyaml.load(n)})("/plugin/yaml-section-builder/config.yml");r(t,"section");let n=(e=>{const t=document.createElement("div");return t.classList.add("slides"),c(e,t,"section"),t})(t),o=document.querySelector("div.reveal div.slides");if(o&&n)for(;n.firstChild;)o.appendChild(n.firstChild)}}}));
